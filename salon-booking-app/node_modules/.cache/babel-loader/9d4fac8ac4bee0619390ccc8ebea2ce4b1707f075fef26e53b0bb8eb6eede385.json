{"ast":null,"code":"import{Container,Row,Col,Button}from'react-bootstrap';import{useSelector,useDispatch}from'react-redux';import useFetch from'../../FetchUrl/useFetch';import{useState}from'react';import CustomTable from'./CustomTable';import{servicesAction}from'../../store/servicesSlice';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminNotifications=()=>{const[fetchData,setFetchData]=useState({url:'http://13.61.4.12:3000/salon-booking/getnotification',method:'GET',body:null,headers:{'Authorization':localStorage.getItem('token'),'Admin':localStorage.getItem('admin')},action:'GET_NOTIFICATIONS'});const dispatch=useDispatch();useFetch(fetchData);useFetch({url:'http://13.61.4.12:3000/salon-booking/getadminStaf',method:'GET',headers:{'Authorization':localStorage.getItem('token'),'Admin':localStorage.getItem('admin')},body:null,action:'GET_All_STAFS'});const stafs=useSelector(state=>state.service.stafs);const[staftable,setStafTable]=useState(null);const notifications=useSelector(state=>state.service.notifications);console.log(notifications);const handleAppointment=data=>{console.log(data);const updateData={status:'Success',id:data.notificationId,stafId:data.id,stafname:data.name,time:data.availabality,email:localStorage.getItem('email')};setFetchData({url:'http://13.61.4.12:3000/salon-booking/update-appointment',method:'POST',body:updateData,headers:{'Content-Type':'application/json','Authorization':localStorage.getItem('token'),'Admin':localStorage.getItem('admin')},action:null});dispatch(servicesAction.updateNotification({status:'Success',id:data.notificationId}));};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Container,{className:\"mt-5\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"fs-1\",children:\"Notifications\"}),notifications.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No Notifictions\"}),notifications.map(notification=>/*#__PURE__*/_jsxs(Row,{className:\"text-dark bg-light rounded p-2 d-flex mb-2 justify-conent-center w-auto align-items-center\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"fs-5 w-75 fw-bold\",children:[notification.user.username,\" has been  \",notification.status==='Canceled'?'Canceled':'Booked',\" An Appointment for \",notification.appointmentname]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-25 \",children:[notification.status==='Pending'&&/*#__PURE__*/_jsx(Button,{className:\"bg-info text-dark fw-bold\",onClick:()=>setStafTable(notification),children:\"Appoint Staf\"}),notification.status==='Success'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"fw-bold\",children:\" Appointment Booked\"}),\" \",/*#__PURE__*/_jsx(Button,{className:\"btn-success\",children:\"Details\"})]})]})]},notification.id)),staftable&&/*#__PURE__*/_jsx(CustomTable,{data:stafs,id:staftable.id,handleAppointment:handleAppointment,onClose:()=>setStafTable(null)})]})});};export default AdminNotifications;","map":{"version":3,"names":["Container","Row","Col","Button","useSelector","useDispatch","useFetch","useState","CustomTable","servicesAction","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminNotifications","fetchData","setFetchData","url","method","body","headers","localStorage","getItem","action","dispatch","stafs","state","service","staftable","setStafTable","notifications","console","log","handleAppointment","data","updateData","status","id","notificationId","stafId","stafname","name","time","availabality","email","updateNotification","children","className","length","map","notification","user","username","appointmentname","onClick","onClose"],"sources":["C:/Users/sumuka/Desktop/Backend Final Project/Salon-Booking-App/src/components/Home/AdminNotifications.js"],"sourcesContent":["\r\n\r\nimport {Container,Row,Col,Button} from 'react-bootstrap'\r\nimport {useSelector,useDispatch} from 'react-redux'\r\nimport useFetch from '../../FetchUrl/useFetch'\r\nimport {useState} from 'react'\r\nimport CustomTable from './CustomTable'\r\nimport {servicesAction} from '../../store/servicesSlice'\r\n\r\nconst AdminNotifications=()=>{\r\n\r\n    const [fetchData,setFetchData]=useState({\r\n        url:'http://13.61.4.12:3000/salon-booking/getnotification',\r\n        method:'GET',\r\n        body:null,\r\n        headers:{\r\n            'Authorization':localStorage.getItem('token'),\r\n            'Admin':localStorage.getItem('admin')\r\n        },\r\n        action:'GET_NOTIFICATIONS'\r\n        \r\n\r\n    })\r\n   const dispatch=useDispatch()\r\n    useFetch(fetchData)\r\n    useFetch({\r\n        url:'http://13.61.4.12:3000/salon-booking/getadminStaf',\r\n        method:'GET',\r\n        headers:{\r\n            'Authorization':localStorage.getItem('token'),\r\n            'Admin':localStorage.getItem('admin')\r\n        },\r\n        body:null,\r\n        action:'GET_All_STAFS'\r\n      })\r\n\r\n      const stafs=useSelector((state)=>state.service.stafs)\r\n\r\n\r\n    const [staftable,setStafTable]=useState(null)\r\n\r\n    const notifications=useSelector(state=>state.service.notifications)\r\n    console.log(notifications)\r\n\r\n    const handleAppointment=(data)=>{\r\n      console.log(data)\r\n      const updateData={\r\n        status:'Success',\r\n        id:data.notificationId,\r\n        stafId:data.id,\r\n        stafname:data.name,\r\n        time:data.availabality,\r\n        email:localStorage.getItem('email')\r\n    }\r\n      setFetchData(\r\n      {\r\n        url:'http://13.61.4.12:3000/salon-booking/update-appointment',\r\n        method:'POST',\r\n        body:updateData,\r\n        headers:{\r\n            'Content-Type':'application/json',\r\n            'Authorization':localStorage.getItem('token'),\r\n            'Admin':localStorage.getItem('admin')\r\n        },\r\n        action:null\r\n        \r\n\r\n    })\r\n      dispatch(servicesAction.updateNotification({status:'Success',id:data.notificationId}))\r\n    }\r\n    return(\r\n        <>\r\n          <Container className='mt-5'>\r\n              <p className='fs-1'>Notifications</p>\r\n            {notifications.length===0 && <p>No Notifictions</p>}\r\n             {notifications.map(notification=><Row key={notification.id} className='text-dark bg-light rounded p-2 d-flex mb-2 justify-conent-center w-auto align-items-center'>\r\n                  <p className='fs-5 w-75 fw-bold'>{notification.user.username} has been  {notification.status==='Canceled'?'Canceled':'Booked'} An Appointment for {notification.appointmentname}</p>\r\n                  <div className='w-25 '>\r\n                   { notification.status==='Pending' && <Button className='bg-info text-dark fw-bold' onClick={()=>setStafTable(notification)}>Appoint Staf</Button>}\r\n                    {notification.status==='Success' && <><p className='fw-bold'> Appointment Booked</p> <Button className='btn-success'>Details</Button></>}\r\n                  </div>\r\n              </Row>)} \r\n              {staftable && <CustomTable data={stafs} id={staftable.id}  handleAppointment={handleAppointment} onClose={()=>setStafTable(null)}/>}\r\n             \r\n            </Container>\r\n        </>\r\n    )\r\n}\r\n\r\n\r\nexport default AdminNotifications"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}