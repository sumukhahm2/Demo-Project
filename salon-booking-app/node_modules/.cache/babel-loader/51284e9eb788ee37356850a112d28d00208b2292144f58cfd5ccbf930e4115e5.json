{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import Calendar from\"react-calendar\";import\"react-calendar/dist/Calendar.css\";import{Container,Modal,Button,Form}from\"react-bootstrap\";import useFetch from'../../FetchUrl/useFetch';import{useSelector}from'react-redux';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AppointmentCalendar=_ref=>{let{returnData,onCancel,reschedule,userId}=_ref;const[selectedDate,setSelectedDate]=useState(new Date());const[appointments,setAppointments]=useState([]);const[showModal,setShowModal]=useState(false);const timeRef=useRef();const ampmRef=useRef();const[newAppointment,setNewAppointment]=useState({title:\"\",time:\"\"});useFetch({url:\"http://13.61.4.12:3000/salon-booking/getallnotification?userId=\".concat(userId),method:'GET',body:null,headers:{'Authorization':localStorage.getItem('token'),'Admin':localStorage.getItem('admin')},action:'GET_NOTIFICATIONS'});const allAppointments=useSelector(state=>state.service.notifications);console.log(allAppointments);const getdateAndTime=e=>{e.preventDefault();console.log({date:selectedDate,time:\"\".concat(timeRef.current.value,\" \").concat(ampmRef.current.value)});returnData({date:selectedDate.toLocaleDateString(\"en-CA\"),time:\"\".concat(timeRef.current.value,\" \").concat(ampmRef.current.value)});setShowModal(false);onCancel();};const handleDateClick=date=>{console.log(date);const formattedDate=date.toLocaleDateString(\"en-CA\");if(!isAppointed(formattedDate)){setSelectedDate(date);setShowModal(true);}else alert('This Date Already Booked ');};const isAppointed=date=>{// allAppointments.some(appt=>console.log(new Date(appt.date).toISOString().split(\"T\")[0]+' '+date))\n// allAppointments.some(appt=>console.log(new Date(appt.date).toISOString().split(\"T\")[0]===date))\nreturn allAppointments.some(appt=>new Date(appt.date).toLocaleDateString(\"en-CA\")===date);};return/*#__PURE__*/_jsxs(Container,{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-end fw-bolder fs-4\",children:/*#__PURE__*/_jsx(Button,{onClick:onCancel,className:\"bg-danger\",children:\"Close\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"Appointment Scheduler\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger fw-bolder\",children:\"Red background dates are booked \"}),/*#__PURE__*/_jsx(Calendar,{onClickDay:handleDateClick,value:selectedDate,minDate:new Date(),tileClassName:_ref2=>{let{date}=_ref2;const formattedDate=date.toLocaleDateString(\"en-CA\");console.log(formattedDate);console.log(isAppointed(formattedDate));if(isAppointed(formattedDate)){return\"bg-danger \";// Add \"red\" for appointed dates\n}else{return\"\";}}}),showModal&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Form,{onSubmit:getdateAndTime,children:[/*#__PURE__*/_jsx(Form.Text,{children:\"Enter The Time SLot\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"time\",ref:timeRef}),/*#__PURE__*/_jsxs(Form.Select,{ref:ampmRef,children:[/*#__PURE__*/_jsx(\"option\",{value:\"AM\",children:\"AM\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PM\",children:\"PM\"})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Submit\"})]})})]});};export default AppointmentCalendar;","map":{"version":3,"names":["React","useState","useEffect","useRef","Calendar","Container","Modal","Button","Form","useFetch","useSelector","jsx","_jsx","jsxs","_jsxs","AppointmentCalendar","_ref","returnData","onCancel","reschedule","userId","selectedDate","setSelectedDate","Date","appointments","setAppointments","showModal","setShowModal","timeRef","ampmRef","newAppointment","setNewAppointment","title","time","url","concat","method","body","headers","localStorage","getItem","action","allAppointments","state","service","notifications","console","log","getdateAndTime","e","preventDefault","date","current","value","toLocaleDateString","handleDateClick","formattedDate","isAppointed","alert","some","appt","className","children","onClick","onClickDay","minDate","tileClassName","_ref2","onSubmit","Text","Control","type","ref","Select"],"sources":["C:/Users/sumuka/Desktop/Backend Final Project/Salon-Booking-App/src/components/Home/Calendar.js"],"sourcesContent":["import React, { useState, useEffect,useRef } from \"react\";\r\nimport Calendar from \"react-calendar\";\r\nimport \"react-calendar/dist/Calendar.css\";\r\nimport { Container, Modal, Button, Form } from \"react-bootstrap\";\r\nimport useFetch from '../../FetchUrl/useFetch'\r\nimport {useSelector} from 'react-redux'\r\n\r\nconst AppointmentCalendar = ({returnData,onCancel,reschedule,userId}) => {\r\n  const [selectedDate, setSelectedDate] = useState(new Date()); \r\n  const [appointments, setAppointments] = useState([]);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const timeRef=useRef()\r\n  const ampmRef=useRef()\r\n  const [newAppointment, setNewAppointment] = useState({\r\n    title: \"\",\r\n    time: \"\",\r\n  });\r\n\r\n  \r\n    useFetch({\r\n        url:`http://13.61.4.12:3000/salon-booking/getallnotification?userId=${userId}`,\r\n        method:'GET',\r\n        body:null,\r\n        headers:{\r\n            'Authorization':localStorage.getItem('token'),\r\n            'Admin':localStorage.getItem('admin')\r\n        },\r\n        action:'GET_NOTIFICATIONS'\r\n        \r\n\r\n    })\r\n\r\nconst allAppointments=useSelector(state=>state.service.notifications)\r\nconsole.log(allAppointments)\r\n\r\nconst getdateAndTime=(e)=>{\r\n   e.preventDefault()\r\n   console.log({date:selectedDate,time:`${timeRef.current.value} ${ampmRef.current.value}`})\r\n   returnData({date:selectedDate.toLocaleDateString(\"en-CA\"),time:`${timeRef.current.value} ${ampmRef.current.value}`})\r\n   setShowModal(false)\r\n   onCancel()\r\n\r\n}\r\n\r\n  const handleDateClick = (date) => {\r\n    console.log(date); \r\n    const formattedDate = date.toLocaleDateString(\"en-CA\");\r\n    \r\n    if(!isAppointed(formattedDate))\r\n    {\r\n        setSelectedDate(date);\r\n        setShowModal(true)\r\n      }\r\n      else\r\n         alert('This Date Already Booked ')\r\n    }\r\n   \r\n\r\n  const isAppointed = (date) => {\r\n    // allAppointments.some(appt=>console.log(new Date(appt.date).toISOString().split(\"T\")[0]+' '+date))\r\n    // allAppointments.some(appt=>console.log(new Date(appt.date).toISOString().split(\"T\")[0]===date))\r\nreturn allAppointments.some(appt=>new Date(appt.date).toLocaleDateString(\"en-CA\")===date)\r\n  };\r\n\r\n  return (\r\n    <Container className='mb-2'>\r\n      <div className='d-flex justify-content-end fw-bolder fs-4'><Button onClick={onCancel} className='bg-danger'>Close</Button></div>\r\n      <h2 className=\"text-center\">Appointment Scheduler</h2>\r\n      <p className='text-danger fw-bolder'>Red background dates are booked </p>\r\n      <Calendar\r\n        onClickDay={handleDateClick}\r\n        value={selectedDate}\r\n        minDate={new Date()}\r\n        tileClassName={({ date }) => {\r\n            const formattedDate = date.toLocaleDateString(\"en-CA\");\r\n            console.log(formattedDate)\r\n            console.log(isAppointed(formattedDate))\r\n            if (isAppointed(formattedDate)) {\r\n              return \"bg-danger \"; // Add \"red\" for appointed dates\r\n            } else {\r\n              return \"\"; \r\n            }\r\n          }}\r\n          \r\n            \r\n      />\r\n   {showModal && <div>\r\n        <Form onSubmit={getdateAndTime}>\r\n            <Form.Text>Enter The Time SLot</Form.Text>\r\n            <Form.Control type='time' ref={timeRef}/>\r\n            <Form.Select ref={ampmRef}>\r\n                <option value='AM'>AM</option>\r\n                <option value='PM'>PM</option>\r\n            </Form.Select>\r\n            <Button type='submit'>Submit</Button>\r\n        </Form>\r\n    </div>}\r\n       \r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AppointmentCalendar;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}