{"ast":null,"code":"import _objectSpread from\"C:/Users/sumuka/Desktop/Backend Final Project/salon-booking-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import Button from'react-bootstrap/Button';import Form from'react-bootstrap/Form';import{useSelector,useDispatch}from'react-redux';import{useState,useRef}from'react';import useFetch from'../../FetchUrl/useFetch';import LoadingBar from'../ProgressBar';import{useSearchParams}from'react-router-dom';import CustomForm from'../CustomForm/CustomForm';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Authentication(){const[inSignUp,setSwitch]=useState(false);const[next,setNext]=useState(null);const isLogin=useSelector(state=>state.auth.isLogin);const formRefs=useRef({});const[searchParams]=useSearchParams();console.log(inSignUp);const type=searchParams.get('type');const[requestConfig,setRequestConfig]=useState({url:'',method:'GET',headers:{},body:null,action:null});console.log(requestConfig);const{data,message,error,loading}=useFetch(requestConfig);const setInputRef=key=>el=>{formRefs.current[key]=el;};const handleAuthentication=e=>{e.preventDefault();const formData={};for(const key in formRefs.current){if(formRefs.current[key]){formData[key]=formRefs.current[key].value;formRefs.current[key].value='';}}console.log(formData);let userData=_objectSpread(_objectSpread({},formData),{},{role:'user'});if(type==='buisness'){userData=_objectSpread(_objectSpread({},formData),{},{role:'admin'});}let url;let action;if(inSignUp){url='http://13.61.4.12:3000/salon-booking/signup';action=null;}else{url='http://13.61.4.12:3000/salon-booking/signin';action='LOGIN';}setRequestConfig({url:url,method:'POST',headers:{'Content-Type':'application/json'},body:userData,action:action});};return/*#__PURE__*/_jsx(\"div\",{className:\"mt-5 m-auto\",children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleAuthentication,className:\" \",children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicEmail\",children:[/*#__PURE__*/_jsx(Form.Text,{className:\"text-light fs-3\",children:inSignUp?'SignUp Here-->':'Login Here-->'}),/*#__PURE__*/_jsx(\"br\",{}),message&&/*#__PURE__*/_jsx(Form.Text,{className:\"text-success fs-5\",children:message}),error&&/*#__PURE__*/_jsx(Form.Text,{className:\"text-danger fs-5\",children:error}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Form.Label,{children:\"Email address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Enter email\",ref:setInputRef('email')}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\",children:\"We'll never share your email with anyone else.\"})]}),inSignUp&&/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter Your Name\",ref:setInputRef('username')})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Password\",ref:setInputRef('password')})]}),inSignUp&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Confirm Password\",ref:setInputRef('confirm-password')})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Mobile Number\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",placeholder:\"Mobile Number\",ref:setInputRef('phone')})]})]}),!loading&&/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:\"mx-2\",children:inSignUp?'SignUp':'Login'}),loading&&/*#__PURE__*/_jsx(LoadingBar,{now:loading}),/*#__PURE__*/_jsx(Button,{className:\"btn-link\",onClick:()=>setSwitch(prev=>!prev),style:{backgroundColor:'inherit'},children:!inSignUp?'Dont Have An Account?':'Have An Account?'})]})});}export default Authentication;","map":{"version":3,"names":["Button","Form","useSelector","useDispatch","useState","useRef","useFetch","LoadingBar","useSearchParams","CustomForm","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Authentication","inSignUp","setSwitch","next","setNext","isLogin","state","auth","formRefs","searchParams","console","log","type","get","requestConfig","setRequestConfig","url","method","headers","body","action","data","message","error","loading","setInputRef","key","el","current","handleAuthentication","e","preventDefault","formData","value","userData","_objectSpread","role","className","children","onSubmit","Group","controlId","Text","Label","Control","placeholder","ref","variant","now","onClick","prev","style","backgroundColor"],"sources":["C:/Users/sumuka/Desktop/Backend Final Project/Salon-Booking-App/src/components/Authentication/Authentication.js"],"sourcesContent":["\r\nimport Button from 'react-bootstrap/Button';\r\nimport Form from 'react-bootstrap/Form';\r\nimport {useSelector,useDispatch} from 'react-redux'\r\nimport {useState,useRef} from 'react'\r\nimport useFetch from '../../FetchUrl/useFetch'\r\nimport LoadingBar from '../ProgressBar'\r\nimport {useSearchParams} from 'react-router-dom'\r\nimport CustomForm from '../CustomForm/CustomForm'\r\n\r\nfunction Authentication() {\r\n   const [inSignUp,setSwitch]=useState(false)\r\n   const [next,setNext]=useState(null)\r\n    const isLogin=useSelector((state)=>state.auth.isLogin)\r\n    const formRefs = useRef({});\r\n    const [searchParams]=useSearchParams()\r\n\r\n  console.log(inSignUp)\r\n    const type=searchParams.get('type')\r\n    const [requestConfig, setRequestConfig] = useState({\r\n        url:'',\r\n        method:'GET',\r\n        headers:{},\r\n        body:null,\r\n        action:null\r\n    });\r\n    \r\n console.log(requestConfig)\r\n    const { data,message, error, loading } = useFetch(\r\n       requestConfig\r\n    );\r\n\r\n\r\n    const setInputRef = (key) => (el) => {\r\n      formRefs.current[key] = el; \r\n    };\r\n\r\n\r\n     const handleAuthentication=(e)=>{\r\n        e.preventDefault()\r\n        \r\n        const formData = {};\r\n      for (const key in formRefs.current) {\r\n        if (formRefs.current[key])\r\n        {\r\n            formData[key] = formRefs.current[key].value;\r\n             formRefs.current[key].value=''\r\n        }\r\n       }\r\n       console.log(formData)\r\n       \r\n        let userData={\r\n          ...formData,\r\n          role:'user'\r\n       }\r\n       if(type==='buisness')\r\n        {\r\n          userData={\r\n            ...formData,\r\n            role:'admin'\r\n         }\r\n        }\r\n        let url\r\n        let action\r\n        if(inSignUp)\r\n        {\r\n         url='http://13.61.4.12:3000/salon-booking/signup'\r\n         action=null\r\n        }\r\n        else{\r\n             \r\n             url='http://13.61.4.12:3000/salon-booking/signin'\r\n            action='LOGIN'\r\n        }\r\n      setRequestConfig({   \r\n        url: url,\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n        body: userData, \r\n        action:action\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className='mt-5 m-auto'>\r\n    <Form onSubmit={handleAuthentication} className=' '>\r\n      <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n        <Form.Text className='text-light fs-3'>{inSignUp?'SignUp Here-->':'Login Here-->'}</Form.Text>\r\n        <br/>\r\n        { message && <Form.Text className='text-success fs-5'>{message}</Form.Text>}\r\n        { error && <Form.Text className='text-danger fs-5'>{error}</Form.Text>}\r\n        <br/>\r\n        <Form.Label>Email address</Form.Label>\r\n        <Form.Control type=\"email\" placeholder=\"Enter email\" ref={setInputRef('email')}/>\r\n        <Form.Text className=\"text-muted\">\r\n          We'll never share your email with anyone else.\r\n        </Form.Text>\r\n      </Form.Group>\r\n      {inSignUp && <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n        <Form.Label>Name</Form.Label>\r\n        <Form.Control type=\"text\" placeholder=\"Enter Your Name\" ref={setInputRef('username')}/>\r\n      </Form.Group>}\r\n\r\n      <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n        <Form.Label>Password</Form.Label>\r\n        <Form.Control type=\"password\" placeholder=\"Password\" ref={setInputRef('password')}/>\r\n      </Form.Group>\r\n     {inSignUp && <><Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n        <Form.Label>Confirm Password</Form.Label>\r\n        <Form.Control type=\"password\" placeholder=\"Confirm Password\" ref={setInputRef('confirm-password')}/>\r\n      </Form.Group>\r\n      <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n        <Form.Label>Mobile Number</Form.Label>\r\n        <Form.Control type=\"number\" placeholder=\"Mobile Number\" ref={setInputRef('phone')} />\r\n      </Form.Group>\r\n    </>}\r\n      \r\n     {!loading  && <Button variant=\"primary\" type=\"submit\" className=\"mx-2\">\r\n        {inSignUp?'SignUp':'Login'}\r\n      </Button>}\r\n      {loading && <LoadingBar now={loading}/>}\r\n      <Button className=\"btn-link\" onClick={()=>setSwitch((prev)=>!prev)}  style={{backgroundColor: 'inherit'}}>{!inSignUp?'Dont Have An Account?':'Have An Account?'}</Button>\r\n    </Form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Authentication;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}